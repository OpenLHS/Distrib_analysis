examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
logreg_D
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
t <- 1
beta_t <- read.csv(paste0(examplefilepath, "Coord_node_iter_", t, "_primer.csv"))[,1]
m <- matrix(data = runif(n = 25), nrow = 5)
m%*%beta_t
m <- matrix(data = runif(n = 50*50), nrow = 50)
m <- matrix(data = runif(n = 50*5), nrow = 50)
X=m
X %*% beta
beta <- beta_t
X %*% beta
exp(X %*% beta)
diag(exp(X %*% beta))
diag(as.vector(exp(X %*% beta)))
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
############### DISTRIBUTED COX MODEL ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Set number of nodes
K <- 3
# No modifications should be required below this point
######################################################
# Allow to set working directory automatically
library(this.path)
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("PoolingOrg_code_log-reg_ex.R")
# Run pooled code
logistic_regression_example_pooled_handler(expath = examplefilepath, nnodes = K)
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/pooled")
############### DISTRIBUTED COX MODEL ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Set number of nodes
K <- 3
# No modifications should be required below this point
######################################################
# Allow to set working directory automatically
library(this.path)
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("PoolingOrg_code_log-reg_ex.R")
# Run pooled code
logistic_regression_example_pooled_handler(expath = examplefilepath, nnodes = K)
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
t = 1
beta_old <- read.csv(paste0(examplefilepath, "Coord_node_iter_", t, "_primer.csv"))[,1]
K <- length(list.files(path=examplefilepath, pattern=paste0("Data_node_[[:digit:]]+_iter_", t, "_output.csv")))
p <- 0
for (k in 1:K) {
node_k <- read.csv(paste0(examplefilepath, "Data_node_", k, "_iter_", t, "_output.csv"))
q <- nrow(node_k)
if (p == 0) {
p <- q
D_t <- rep(0, p)
V_t <- matrix(0, p, p)
}
else if (p != q)
stop("Nodes files do not seem to contain the same number of predictors.")
D_t <- D_t + node_k[,1]
V_t <- V_t + as.matrix(node_k[,-1])
}
solve(V_t, D_t)
beta_new <- beta_old + solve(V_t, D_t)
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
Sigma <- solve(V_t)
se <- qnorm(1 - 0.5*alpha) * sqrt(diag(Sigma))
alpha <- 0.05
se <- qnorm(1 - 0.5*alpha) * sqrt(diag(Sigma))
Sigma
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
############### DISTRIBUTED COX MODEL ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Set number of nodes
K <- 3
# No modifications should be required below this point
######################################################
# Allow to set working directory automatically
library(this.path)
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("PoolingOrg_code_log-reg_ex.R")
# Run pooled code
logistic_regression_example_pooled_handler(expath = examplefilepath, nnodes = K)
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
K <- 3 # Input the number of nodes
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/pooled")
# Extracts data and weights from the CSVs and creates R data frames
pooled_data = data.frame()
weights_pooled = data.frame()
for(k in 1:K){
# Data
node_data <- read.csv(paste0("Data_node_", k, ".csv"))
# Weights, if provided
if(file.exists(paste0("Weights_node_", k, ".csv"))){
node_weights <- read.csv(paste0("Weights_node_", k, ".csv"))
} else{
node_weights <- as.data.frame(rep(1, nrow(node_data)))
}
pooled_data <- rbind(pooled_data, node_data)
weights_pooled <- rbind(weights_pooled, node_weights)
}
# Remove missing values, if any
data_and_weights <- cbind(pooled_data, weights_pooled[,1])
data_and_weights <- data_and_weights[complete.cases(data_and_weights),]
pooled_data <- data_and_weights[, -(ncol(data_and_weights))]
weights_pooled <- data_and_weights[, ncol(data_and_weights)]
fit <- glm(out1 ~ ., data=pooled_data, family="poisson", weights = weights_pooled)
fit
vcov(fit)
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
setwd("~/Library/CloudStorage/OneDrive-Bibliothèquespartagées-USherbrooke/GRIIS - Projets statistiques/Stage Samuel (A25)/Code R pour méthode")
data <- read.csv("poisson_regression_dataset.csv")
data <- read.csv("poisson_regression_dataset.csv", header = T, sep = ";")
correct_data <- data
correct_data <- data %>%
select(Counts, Feature1, Feature2)
library(tidyverse)
correct_data <- data %>%
select(Counts, Feature1, Feature2)
colnames(correct_data)[1] <- "out1"
d1 <- correct_data[1:50,]
d2 <- correct_data[51:200, ]
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
write.csv(d1, file = "Data_node_1.csv")
write.csv(d1, file = "Data_node_1.csv", row.names = FALSE)
data <- read.csv("poisson_regression_dataset.csv", header = T, sep = ";")
write.csv(d1, file = "Data_node_1.csv", row.names = FALSE)
write.csv(d2, file = "Data_node_2.csv", row.names = FALSE)
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
# logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
############### DISTRIBUTED LOGISTIC REGRESSION ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Allow to set working directory automatically
library(this.path)
# Choose the number of iterations you want to run (only available for "same_folder" examples)
nb_iter <- 8
# No modifications should be required below this point
######################################################
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("Data_node_call_log-reg_ex.R")
source("Coord_node_call_iter_log-reg_ex.R")
for(replicate in 1:nb_iter){
# Run data node code
logistic_regression_example_datanode_handler(nodeid = 1, expath = examplefilepath)
logistic_regression_example_datanode_handler(nodeid = 2, expath = examplefilepath)
# logistic_regression_example_datanode_handler(nodeid = 3, expath = examplefilepath)
# Run coordination node code
logistic_regression_example_coordnode_handler(expath = examplefilepath)
}
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
############### DISTRIBUTED COX MODEL ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Set number of nodes
K <- 2
# No modifications should be required below this point
######################################################
# Allow to set working directory automatically
library(this.path)
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("PoolingOrg_code_log-reg_ex.R")
# Run pooled code
logistic_regression_example_pooled_handler(expath = examplefilepath, nnodes = K)
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/pooled")
############### DISTRIBUTED COX MODEL ####################
## License: https://creativecommons.org/licenses/by-nc-sa/4.0/
## Copyright: GRIIS / Université de Sherbrooke
# Set number of nodes
K <- 2
# No modifications should be required below this point
######################################################
# Allow to set working directory automatically
library(this.path)
# Retrieve current working directory
setwd(this.dir())
examplefilepath <- paste0(getwd(), "/")
# Retrieve source code
setwd("../../example_handler")
source("PoolingOrg_code_log-reg_ex.R")
# Run pooled code
logistic_regression_example_pooled_handler(expath = examplefilepath, nnodes = K)
## Remove all environment variables.
## If you want to see the variable that were create, simply don't execute that line (and clear them manually after)
rm(list = ls())
setwd("~/Desktop/poisson_regression/Poisson_regression_modelling/examples/random_data_same_folder/distributed")
